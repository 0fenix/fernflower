<?xml version="1.0" encoding="UTF-8"?>
<project name="Fernflower" default="dist" basedir=".">

  <target name="init">
    <property name="src" value="${basedir}/src"/>
    <property name="out" value="${basedir}/out"/>
    <property name="dist" value="${basedir}/fernflower.jar"/>
  </target>

  <target name="clean" depends="init">
    <delete includeemptydirs="true" failonerror="false">
      <fileset dir="${out}"/>
      <fileset file="${dist}"/>
    </delete>
  </target>

  <target name="compile" depends="init,clean">
    <mkdir dir="${out}"/>
    <javac srcdir="${src}" destdir="${out}" source="1.6" target="1.6" encoding="UTF-8" debug="true" includeantruntime="false"/>
  </target>

  <target name="dist" depends="init,compile">
    <jar jarfile="${dist}" compress="true" basedir="${out}" includes="**/*.class">
      <manifest>
        <attribute name="Main-Class" value="org.jetbrains.java.decompiler.main.decompiler.ConsoleDecompiler"/>
      </manifest>
    </jar>
  </target>

</project>
